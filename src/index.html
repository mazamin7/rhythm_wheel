<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Rhythm Wheel</title>
    <link rel='stylesheet' href='https://unpkg.com/vue-select@latest/dist/vue-select.css'>
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css'>
    <link rel="stylesheet" href="./style.css">
</head>

<body>
    <div id="app">
        <b-navbar toggleable="lg" type="dark" variant="dark" fixed class="navbar">
            <b-navbar-brand href="#canvas">Rhythm Wheel</b-navbar-brand>
        </b-navbar>
        <div class="buttons-container">
            <b-button pill :disabled="getStatus() == 1" v-on:click="play()">
                <img class="play-pause-image" src="resources/images/play-button-circled.png" />
            </b-button>
            <b-button pill :disabled="!getStatus()" v-on:click="pause()">
                <img class="play-pause-image" src="resources/images/pause--button.png" />
            </b-button>
        </div>
        <div class="speed-container">
            <b-form-input class="speed-slider" type="range" v-model="speed" min="1" max="100"></b-form-input>
            <label>RPM : {{speed}}</label>
        </div>
        <div class="menu-container">
            <div class="menu-option-container">
                <label>States:</label>
                <v-select ref="stateSelector" :options="states" label="name" class="select" v-model="selectedState">
                    <template v-slot:option="option">
                        <div v-if="option.name!='Add New'" class="inside-ring-select">
                        <p>{{option.name}}</p>
                        <b-button class="button-inside-select" pill v-on:click="deleteState($event, option.id)">
                            <!--<img class="image" src="resources/images/external--delete--multimedia--button.png" />-->
                            <img class="image-small" src="resources/images/delete--property.png" />
                        </b-button>
                        </div>
                        <div v-if="option.name=='Add New'" class="inside-ring-select">
                            <strong>Add New</strong>
                            <b-button class="button-inside-select" pill v-on:click="createNewState()">
                                <img class="image-small" src="resources/images/add--button.png" />
                            </b-button>
                        </div>
                      </template>
                </v-select>
                <div class="buttons-container">
                    <b-button pill :disabled="selectedState == null" v-on:click="loadState(selectedState.rings)">
                        <!-- <img class="image" src="resources/images/load-download-icon.png" /> -->
                        <img class="image" src="resources/images/download--button.png" />
                    </b-button>
                    <b-button pill :disabled="selectedState == null" v-on:click="saveState(selectedState.id)">
                        <!--<img class="image" src="resources/images/load2-upload-icon.png" /> -->
                        <img class="image" src="resources/images/save--button.png" />
                    </b-button>
                </div>
                <div v-if="showAddState" class="buttons-container">
                    <b-form-input v-model="stateName" placeholder="State name"></b-form-input>
                    <b-button pill :disabled="stateName == null || stateName.trim() == '' " v-on:click="newState(stateName)">
                        <!--<img class="image" src="resources/images/Graphicloads-Colorful-Long-Shadow-New.ico" />-->
                        <img class="image" src="resources/images/add--property.png" />
                    </b-button>
                </div>
            </div>
            <div class="menu-option-container">
                <label>Ring:</label>
                <v-select :options="range(1, this.rings.length + 1, 1)" class="select" v-model="selectedRing" @input="selectRing(selectedRing)">
                    <template v-slot:option="option">
                        <div v-if="option.label <= rings.length" class="inside-ring-select">
                        <p>{{option.label}}</p>
                        <b-button class="button-inside-select" pill v-on:click="deleteRing($event, option.label - 1)">
                            <img class="image-small" src="resources/images/external--delete--multimedia--button.png"/>
                        </b-button>
                        </div>
                        <div v-if="option.label>rings.length && rings.length<numeroMaxRings" class="inside-ring-select">
                            <strong>Add New</strong>
                            <b-button class="button-inside-select" pill v-if="rings.length<numeroMaxRings" v-on:click="addRing(null, null, null)">
                                <img class="image-small" src="resources/images/add--button.png" />
                            </b-button>
                        </div>
                      </template>
                </v-select>
                <div class="buttons-container">
                </div>
            </div>
            <div class="menu-option-container">
                <label>Instrument:</label>
                <v-select :disabled="selectedRing == null" :options="instruments" label="name" @input="changeRingInstrument(selectedRing - 1, selectedInstrument)" class="select" v-model="selectedInstrument">
                </v-select>
            </div>
            <div class="menu-option-container">
                <label>Color:</label>
                <v-select :disabled="selectedRing == null" :options="colors" @input="changeRingColor(selectedRing - 1, selectedColor)" class="select" v-model="selectedColor">
                </v-select>
            </div>
        </div>
        <div class="buttons-container">
            <b-button pill :disabled="!canChangeRingSteps(selectedRing, 0)" v-on:click="changeRingSteps(selectedRing - 1, 0)">
                <img class="image" src="resources/images/minus--math-button.png" />
            </b-button>
            <b-button pill :disabled="!canChangeRingSteps(selectedRing, 1)" v-on:click="changeRingSteps(selectedRing - 1, 1)">
                <img class="image" src="resources/images/plus--math--button.png" />
            </b-button>
        </div>
        <div class="buttons-container">
            <b-button pill v-on:click="randomize()">
                <img class="image" src="resources/images/random--button.png" />
            </b-button>
        </div>
        <div class="canvas-container" @mouseEnter="disableScroll()" @mouseLeave="enableScroll()">
            <canvas ref="myCanvas" id="canvas"></canvas>
        </div>
    </div>
    <script type="module" src="script.js"></script>
</body>

</html>